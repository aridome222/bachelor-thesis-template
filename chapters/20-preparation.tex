\chapter{研究の準備}\label{cha:Preparation}

\section{視覚的回帰テスト}\label{sec:vrt}
視覚的回帰テスト (Visual regression testing)\cite{Visual regression testing}は、
Webページの変更前画像と変更後画像を比較し差分を検出することで、意図しないレイアウトの変更が発生していないことを確認するテスト手法である。
視覚的回帰テストの基本的な手順は以下の通りである。
\begin{enumerate}
    \setlength{\itemsep}{0pt}
          \setlength{\parsep}{0pt}
    \item 変更前画像と変更後画像の作成
    \item 画像比較による差分検出
    \item 結果の評価
\end{enumerate}

\section{レイアウトの不具合}\label{sec:layout effect}
レイアウトの不具合は、Webページの画面要素が適切にレイアウトされていないことである。【TODO: レイアウトの不具合検出に関する関連研究のリンクを見つける】
% レイアウトの不具合が発生すると、WebサイトやWebアプリの使いやすさを損ない、ユーザが必要な情報を見つけることが難しくなる。
本研究では、以下の主な3つのレイアウトの不具合を検出対象とする。
\begin{itemize}
    \setlength{\itemsep}{0pt}
          \setlength{\parsep}{0pt}
    \item 画面要素の隠れ
    \item 画面要素の見切れ
    \item 画面要素の重なり
\end{itemize}
画面要素の隠れは、Webページの特定の画面要素がその画面要素を含むコンテナやビューポートの境界を超えてはみ出している状態を指す。
画面要素の見切れは、Webページ上でコンテンツの一部がビューポートやコンテナ要素の境界によって切り取られ、完全には表示されない状態を指す。
画面要素の重なりは、Webページ上で複数の要素(テキスト、画像、ボタンなど)が意図せず重なってしまっている状態を指す。

\section{OpenCV}
\label{sec:opencv}
OpenCV (Open Source Computer Vision Library)は、画像や動画に関する処理機能をまとめた、コンピュータビジョン向けのオープンソースのライブラリである\cite{OpenCV}。
本研究では、OpenCVに用意されている、imread関数、cvtColor関数、threshold関数、connectedComponentsWithStats関数の3つの関数を用いる。
\paragraph{imread関数}
imread関数は、画像ファイルの読み込みを行う関数である。
第一引数には、画像ファイルのパスを指定する。
また、第二引数には0を指定することで、画像ファイルをグレースケール画像に変換して読み込むことができる。
\paragraph{cvtColor関数}
cvtColor関数は、画像の色空間を変換する関数である。
第一引数には、色空間変換を適用する画像を指定し、第二引数にはどの色空間へ変換するかを示すコードを指定する。
% 例えば、BGR(青、緑、赤)からGRAY(グレースケール)、RGB(赤、緑、青)からHSV(色相、彩度、明度)など、様々な色空間への変換が可能である。
本研究では、BGR(青、緑、赤)からGRAY(グレースケール)と、GRAY(グレースケール)からBGR(青、緑、赤)の色空間への変換に用いる。
\paragraph{adaptiveThreshold関数}
adaptiveThreshold関数は、画像の二値化を局所的な条件に応じて行う関数である。
この関数は特に、画像内の異なる領域で異なる光の条件に適応するために使用される。
第一引数には二値化を適用するグレースケール画像を指定し、第二引数にはピクセル値の最大値（通常255）を指定する。
第三引数では、局所的な二値化方法を指定する。
本研究では、局所的な二値化方法として、近傍領域の平均値に基づいて閾値を計算するcv2.ADAPTIVE\_THRESH\_MEAN\_Cを用いる。
第四引数には二値化の方法を指定し、本研究では標準的な二値化方法であるcv2.THRESH\_BINARYを指定する。
第五引数は近傍領域のサイズ、第六引数は計算された閾値から引かれる定数である。
この関数は、画像内の異なる照明条件下でのオブジェクトの検出や画像のセグメンテーションに有効である。
\paragraph{bitwise\_not関数}
bitwise\_not関数は、画像の各ピクセルのビットを反転させる関数である。
この関数は、画像の白黒を反転させる効果がある。
具体的には、0（黒）と255（白）の値を持つピクセルが反転される。
黒いピクセル（0の値を持つ）は白に（255に）、白いピクセル（255の値を持つ）は黒に（0に）変わる。
この関数は第一引数にビット反転を行いたい画像を指定する。
bitwise\_not関数は画像処理において、特に二値化された画像で黒と白の役割を入れ替える必要がある場合に用いられる。

\section{Selenium WebDriver}\label{sec:Selenium_WebDriver}
Selenium WebDriver\cite{Selenium WebDriver}は、Seleniumプロジェクト\cite{Selenium}の一部であり、Webブラウザを直接制御するためのAPIを提供する。
Selenium WebDriverのAPIを用いてテストスクリプトを実行することで、指定したWebページにアクセスし、要素のクリックやページ遷移などのユーザ操作を自動で行う。
\section{requestsモジュール}\label{sec:requests}

\section{difflibモジュール}\label{sec:difflib}

\section{Flask}\label{sec:Flask}